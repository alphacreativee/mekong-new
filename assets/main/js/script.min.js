import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function donut(){var l=[{label:"Measurable",value:10,link:"#",content:"1"},{label:"Differentiation",value:10,link:"#",content:"2"},{label:"Clear ",value:10,link:"#",content:"3"},{label:"Result",value:10,link:"#",content:"4"},{label:"Question ",value:10,link:"#",content:"5"},{label:"LeaderShip",value:10,link:"#",content:"6"}],r=Math.min(450,450)/2,n=d3.scale.category20(),t=d3.svg.arc().innerRadius(r-80).outerRadius(r-10),e=d3.layout.pie().value(function(t){return t.value}).sort(null),a=d3.select("#donut-chart").attr("width",450).attr("height",450).append("g").attr("transform","translate("+r+","+r+")"),e=a.selectAll(".arc").data(e(l)).enter().append("g").attr("class","arc").on("click",function(t,e){e=l[e].content;$(".dbcontent").fadeOut("fast"),$(".dbcontent--"+e).fadeIn("slow")});e.append("path").attr("d",t).attr("fill",function(t,e){return n(e)}),e.each(function(t,e){var n=d3.select(this),a=(r-80+r-25)/2,a=(t.startAngle,t.endAngle,Math.PI,d3.svg.arc().innerRadius(a).outerRadius(a).startAngle(t.startAngle).endAngle(t.endAngle));n.append("path").attr("id","textPath-"+e).attr("d",a).style("fill","none").style("stroke","none"),l[e].label.length;n.append("text").style("pointer-events","none").append("textPath").attr("xlink:href","#textPath-"+e).style("text-anchor","middle").attr("startOffset","25%").attr("dy","-0.5em").attr("fill","#fff").attr("font-size","12px").attr("font-weight","700").attr("letter-spacing","0.5px").style("text-transform","uppercase").text(l[e].label)}),a.append("circle").attr("cx",0).attr("cy",0).attr("r",100).attr("fill","#b71c1c"),a.append("text").attr("dy","0.35em").style("text-anchor","middle").attr("class","inner-circle-text").attr("fill","#fff").attr("font-size","40px").attr("font-weight","bold").attr("letter-spacing","2px").text("VISION")}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{lenis.raf(1e3*t)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),donut()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(t){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0,console.log("1"))}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});